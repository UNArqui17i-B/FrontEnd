<html><head></head><body><dom-module id="vaadin-grid-column-reordering-themability-styles"><template><style>:host([reordering]) .vaadin-grid-cell{background:#000;}:host([reordering]) .vaadin-grid-cell[reorder-status="dragging"]{background:var(--primary-color, #000);}:host([reordering]) .vaadin-grid-cell:not([detailscell]) ::content > vaadin-grid-cell-content{transition:opacity 300ms;transform:translateZ(0);opacity:0.8;}:host([reordering]) .vaadin-grid-cell[reorder-status="allowed"] ::content > vaadin-grid-cell-content{opacity:1;}:host([reordering]) .vaadin-grid-cell[reorder-status="dragging"] ::content > vaadin-grid-cell-content{opacity:0.95;}</style></template></dom-module><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.grid=vaadin.elements.grid||{},vaadin.elements.grid.ColumnReorderingBehavior={properties:{columnReorderingAllowed:{type:Boolean,value:!1}}},vaadin.elements.grid.TableColumnReorderingBehavior={properties:{_orderBaseScope:{type:Number,value:1e7}},listeners:{dragstart:'_onDragStart',dragover:'_onDragOver',dragend:'_onDragEnd'},observers:['_updateOrders(columnTree, columnTree.*)'],_updateOrders:function(a){a[0].forEach(function(c,d){c._order=(d+1)*this._orderBaseScope},this)},_onDragStart:function(a){var b=this._getCellByCellContent(a.target);b&&(this.toggleAttribute('reordering',!0),this._draggedColumn=b.column,this._setSiblingsReorderStatus(this._draggedColumn,'allowed'),this._draggedColumn._reorderStatus='dragging',a.dataTransfer&&(a.dataTransfer.setData('text',''),a.dataTransfer.effectAllowed='move'),this._autoScroller())},_setSiblingsReorderStatus:function(a,b){Polymer.dom(Polymer.dom(a).parentNode).children.filter(function(c){return /column/.test(c.localName)&&this._isSwapAllowed(c,a)},this).forEach(function(c){c._reorderStatus=b})},_onDragOver:function(a){a.preventDefault();var b=this._getCellByCellContent(a.target),c=this._getTargetColumn(b,this._draggedColumn);c&&this._isSwapAllowed(this._draggedColumn,c)&&this._isSwappableByPosition(c,a.clientX)&&this._swapColumnOrders(this._draggedColumn,c),this._lastDragClientX=a.clientX},_autoScroller:function(){if(this._lastDragClientX){var a=this._lastDragClientX-this.getBoundingClientRect().right+50,b=this.getBoundingClientRect().left-this._lastDragClientX+50;0<a?this.$.table.scrollLeft+=a/10:0<b&&(this.$.table.scrollLeft-=b/10),this._scrollHandler()}this._draggedColumn&&this.async(this._autoScroller,10)},_onDragEnd:function(){this.toggleAttribute('reordering',!1),this._draggedColumn._reorderStatus='',this._setSiblingsReorderStatus(this._draggedColumn,''),this._draggedColumn=null,this._lastDragClientX=null},_isSwapAllowed:function(a,b){if(a&&b){var d=a.parentElement===b.parentElement,f=a.frozen===b.frozen;return a!==b&&d&&f}},_isSwappableByPosition:function(a,b){var c=Polymer.dom(this.$.header).querySelectorAll('th').filter(function(f){return f.column===a})[0],d=this.$.header.querySelector('[reorder-status=dragging]').getBoundingClientRect();return c.getBoundingClientRect().left>d.left?b>c.getBoundingClientRect().right-d.width:b<c.getBoundingClientRect().left+d.width},_getCellByCellContent:function(a){if(a){for(var b=null;null===b&&a!==this.target&&a;)'vaadin-grid-cell-content'===a.localName&&(b=a.id),a=a.parentElement;if(null!==b){var c=Polymer.dom(this.$.table).querySelector('content[select="#'+b+'"]');return Polymer.dom(c).parentNode}}},_swapColumnOrders:function(a,b){var c=a._order;a._order=b._order,b._order=c,this._updateLastFrozen(),this._updateLastColumn()},_getTargetColumn:function(a,b){if(a&&b){for(var c=a.column;c.parentElement!==b.parentElement&&c!==this.target;)c=c.parentElement;return c.parentElement===b.parentElement?c:a.column}}};</script></body></html>