<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="vaadin-grid-column.html"></head><body><dom-module id="vaadin-grid-column-group"><script>Polymer({is:'vaadin-grid-column-group',behaviors:[vaadin.elements.grid.ColumnBaseBehavior],properties:{_childColumns:{value:function(){return Polymer.dom(this).querySelectorAll('vaadin-grid-column, vaadin-grid-selection-column')}},flexGrow:{type:Number,readOnly:!0},width:{type:String,readOnly:!0},_visibleChildColumns:Array,colSpan:{type:Number,notify:!0,readOnly:!0},_rootColumns:Array},observers:['_updateVisibleChildColumns(_childColumns)','_childColumnsChanged(_childColumns)','_flexGrowChanged(flexGrow)','_widthChanged(width)','_frozenChanged(_childColumns, frozen)','_hiddenChanged(hidden)','_visibleChildColumnsChanged(_visibleChildColumns)','_colSpanChanged(colSpan)','_orderChanged(_order, _rootColumns)','_reorderStatusChanged(_reorderStatus, _rootColumns)','_resizableChanged(resizable, _rootColumns)'],listeners:{'property-changed':'_columnPropChanged'},attached:function(){this._updateFlexAndWidth(this._visibleChildColumns),this._addNodeObserver()},detached:function(){Polymer.dom(this).unobserveNodes(this._observer)},_columnPropChanged:function(c){'hidden'===c.detail.path&&(this._preventHiddenCascade=!0,this._updateVisibleChildColumns(this._childColumns),this._preventHiddenCascade=!1),/flexGrow|width|hidden|_childColumns/.test(c.detail.path)&&this._updateFlexAndWidth(this._visibleChildColumns),'frozen'===c.detail.path&&(this.frozen=c.detail.value),'lastFrozen'===c.detail.path&&(this._lastFrozen=c.detail.value)},_orderChanged:function(c,d){if(c){var f=/(0+)$/.exec(c).pop().length,g=~~(Math.log(d.length)/Math.log(Math.LN10))+1,h=Math.pow(10,f-g),i=d.slice(0);i[0]&&i[0]._order&&i.sort(function(j,k){return j._order-k._order}),i.forEach(function(j,k){j._order=c+(k+1)*h}),this.fire('property-changed',{path:'order',value:c})}},_reorderStatusChanged:function(c,d){d.forEach(function(f){f._reorderStatus=c}),this.fire('property-changed',{path:'reorderStatus',value:c})},_resizableChanged:function(c,d){d.forEach(function(f){f.resizable=c}),this.fire('property-changed',{path:'resizable',value:c})},_updateVisibleChildColumns:function(c){this._visibleChildColumns=c.filter(function(d){return!d.hidden})},_childColumnsChanged:function(c){!this._autoHidden&&this.hidden&&(c.forEach(function(d){d.hidden=!0}),this._updateVisibleChildColumns(c)),this.fire('property-changed',{path:'_childColumns',value:c})},_updateFlexAndWidth:function(c){c.length?this._setWidth('calc('+c.reduce(function(d,f){return d+=' + '+(f.width||'0px').replace('calc','')},'').substring(3)+')'):this._setWidth('0px'),this._setFlexGrow(c.reduce(function(d,f){return d+f.flexGrow},0))},_frozenChanged:function(c,d){c.forEach(function(f){f.frozen=d}),this.fire('property-changed',{path:'frozen',value:d})},_hiddenChanged:function(c){this._rootColumns&&!this._preventHiddenCascade&&(this._ignoreVisibleChildColumns=!0,this._rootColumns.forEach(function(d){d.hidden=c}),this._ignoreVisibleChildColumns=!1),this.fire('property-changed',{path:'hidden',value:c})},_visibleChildColumnsChanged:function(c){this._setColSpan(c.length),this._ignoreVisibleChildColumns||(0===c.length?this._autoHidden=this.hidden=!0:this.hidden&&this._autoHidden&&(this._autoHidden=this.hidden=!1))},_colSpanChanged:function(c){this.fire('property-changed',{path:'colSpan',value:c})},_addNodeObserver:function(){this._observer=Polymer.dom(this).observeNodes(function(c){this._rootColumns=Polymer.dom(this).children.filter(function(f){return /column/.test(f.localName)});var d=function(f){return f.nodeType===Node.ELEMENT_NODE&&0===f.localName.indexOf('vaadin-grid-column')};(0<c.addedNodes.filter(d).length||0<c.removedNodes.filter(d).length)&&(this._childColumns=Polymer.dom(this).querySelectorAll('vaadin-grid-column'))}.bind(this))}});</script></dom-module></body></html>