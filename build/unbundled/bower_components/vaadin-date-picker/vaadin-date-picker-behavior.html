<html><head><link rel="import" href="../iron-form-element-behavior/iron-form-element-behavior.html"><link rel="import" href="../iron-validatable-behavior/iron-validatable-behavior.html"><link rel="import" href="../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html"><link rel="import" href="../iron-resizable-behavior/iron-resizable-behavior.html"><link rel="import" href="vaadin-date-picker-helper.html"><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.datepicker=vaadin.elements.datepicker||{},vaadin.elements.datepicker.DatePickerBehaviorImpl={observers:['_selectedDateChanged(_selectedDate, i18n.formatDate)','_validateInput(_selectedDate, _minDate, _maxDate)','_focusedDateChanged(_focusedDate, i18n.formatDate)','_announceFocusedDate(_focusedDate, opened, _ignoreAnnounce)'],properties:{_selectedDate:{type:Date},_focusedDate:Date,value:{type:String,observer:'_valueChanged'},hasValue:{type:Boolean,computed:'_hasValue(value)',reflectToAttribute:!0},initialPosition:String,label:String,opened:{type:Boolean,reflectToAttribute:!0,notify:!0},showWeekNumbers:{type:Boolean},_fullscreen:{value:!1,observer:'_fullscreenChanged'},_fullscreenMediaQuery:{value:'(max-width: 420px), (max-height: 420px)'},_touchPrevented:Array,i18n:{type:Object,value:function(){return{monthNames:['January','February','March','April','May','June','July','August','September','October','November','December'],weekdays:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],weekdaysShort:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],firstDayOfWeek:0,week:'Week',calendar:'Calendar',clear:'Clear',today:'Today',cancel:'Cancel',formatDate:function(a){var b=a.getFullYear(),c=b.toString();return 3>c.length&&0<=b&&(c=(10>b?'000':'00')+b),a.getMonth()+1+'/'+a.getDate()+'/'+c},parseDate:function(a){var f,b=a.split('/'),c=new Date,g=c.getMonth(),h=c.getFullYear();if(3===b.length?(h=parseInt(b[2]),3>b[2].length&&0<=h&&(h+=50>h?2e3:1900),g=parseInt(b[0])-1,f=parseInt(b[1])):2===b.length?(g=parseInt(b[0])-1,f=parseInt(b[1])):1===b.length&&(f=parseInt(b[0])),void 0!==f){var j=new Date(0,0);return j.setFullYear(h),j.setMonth(g),j.setDate(f),j}},formatTitle:function(a,b){return a+' '+b}}}},min:{type:String,observer:'_minChanged'},max:{type:String,observer:'_maxChanged'},_minDate:{type:Date,value:''},_maxDate:{type:Date,value:''},_noInput:{type:Boolean,computed:'_isNoInput(_fullscreen, i18n, i18n.*, _ios)'},_ios:{type:Boolean,value:navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/)},_ignoreAnnounce:{value:!0},_focusOverlayOnOpen:Boolean,_documentPointerEvents:String},created:function(){this._boundOnScroll=this._onScroll.bind(this)},listeners:{tap:'open',touchend:'_preventDefault',keydown:'_onKeydown',close:'_close','date-tap':'_close','focus-input':'_focusAndSelect'},ready:function(){this.value===void 0&&(this.value='')},open:function(){this.disabled||this.readonly||(this.$.dropdown.open(),this._updateAlignmentAndPosition())},_close:function(a){a&&a.stopPropagation(),this.inputElement.focus(),this.close()},close:function(){this.$.dropdown.close()},get inputElement(){return this._input()},_parseDate:function(a){var b=/^(\d{4}|[-+]\d{6})-(\d{2})-(\d{2})$/.exec(a);if(b){var c=new Date(0,0);return c.setFullYear(parseInt(b[1],10)),c.setMonth(parseInt(b[2],10)-1),c.setDate(parseInt(b[3],10)),c}},_isNoInput:function(){return this._fullscreen||!this.i18n.parseDate||this._ios},_formatISO:function(a){return a instanceof Date?new Date(a.getTime()-6e4*a.getTimezoneOffset()).toISOString().split('T')[0]:''},_selectedDateChanged:function(a,b){this.value=this._formatISO(a),this._focusedDate=a,this._inputValue=a?b(a):''},_focusedDateChanged:function(a,b){this._ignoreFocusedDateChange||this._noInput||(this._inputValue=a?b(a):'')},_hasValue:function(a){return!!a},_handleDateChange:function(a,b,c){if(!b)return void(this[a]='');var f=this._parseDate(b);return f?void(!vaadin.elements.datepicker.DatePickerHelper._dateEquals(this[a],f)&&(this[a]=f)):void(this.value=c)},_valueChanged:function(a,b){this._handleDateChange('_selectedDate',a,b)},_minChanged:function(a,b){this._handleDateChange('_minDate',a,b)},_maxChanged:function(a,b){this._handleDateChange('_maxDate',a,b)},_updateAlignmentAndPosition:function(){var a=Math.max(document.documentElement.clientWidth,window.innerWidth||0);this.$.dropdown.positionTarget=this._fullscreen?document.documentElement:this;var b=Math.max(document.documentElement.clientHeight,window.innerHeight||0),c=this.getBoundingClientRect().top>b/2,f=this.getBoundingClientRect().left+this.clientWidth/2>a/2;this.$.dropdown.verticalAlign=c?'bottom':'top',this.$.dropdown.horizontalAlign=this._fullscreen?null:f?'right':'left',this._fullscreen?(this.$.dropdown.style.marginTop=0,this.$.dropdown.style.marginBottom=0):(this.$.dropdown.style.marginTop=(c?10:this.clientHeight+2)+'px',this.$.dropdown.style.marginBottom=(c?this.clientHeight:10)+'px')},_fullscreenChanged:function(){this.$.dropdown.opened&&this._updateAlignmentAndPosition()},_onOverlayOpened:function(){var a=this._parseDate(this.initialPosition),b=this._selectedDate||this.$.overlay.initialPosition||a||new Date;this.$.overlay.initialPosition=a||vaadin.elements.datepicker.DatePickerHelper._dateAllowed(b,this._minDate,this._maxDate)?b:vaadin.elements.datepicker.DatePickerHelper._getClosestDate(b,[this._minDate,this._maxDate]),this.$.overlay.scrollToDate(this.$.overlay.focusedDate||this.$.overlay.initialPosition),this._ignoreFocusedDateChange=!0,this.$.overlay.focusedDate=this.$.overlay.focusedDate||this.$.overlay.initialPosition,this._ignoreFocusedDateChange=!1,window.addEventListener('scroll',this._boundOnScroll,!0),this.listen(this,'iron-resize','_updateAlignmentAndPosition'),''===document.createElement('div').style.webkitOverflowScrolling&&(this._touchPrevented=this._preventWebkitOverflowScrollingTouch(this.parentElement)),this._focusOverlayOnOpen?(this.$.overlay.focus(),this._focusOverlayOnOpen=!1):this._focus(),this.updateStyles(),this._documentPointerEvents=document.body.style.pointerEvents,document.body.style.pointerEvents='none',this._ignoreAnnounce=!1},_preventWebkitOverflowScrollingTouch:function(a){for(var b=[];a;){if('touch'===window.getComputedStyle(a).webkitOverflowScrolling){var c=a.style.webkitOverflowScrolling;a.style.webkitOverflowScrolling='auto',b.push({element:a,oldInlineValue:c})}a=a.parentElement}return b},_onOverlayClosed:function(){if(this._ignoreAnnounce=!0,window.removeEventListener('scroll',this._boundOnScroll,!0),this.unlisten(this,'iron-resize','_updateAlignmentAndPosition'),this._touchPrevented&&(this._touchPrevented.forEach(function(f){f.element.style.webkitOverflowScrolling=f.oldInlineValue}),this._touchPrevented=[]),this.updateStyles(),document.body.style.pointerEvents=this._documentPointerEvents,this._ignoreFocusedDateChange=!0,this.i18n.parseDate){var a=this._inputValue,b=this.i18n.parseDate(a);this._isValidDate(b)?this._selectedDate=b:(this._selectedDate=null,this._inputValue=a)}else this._focusedDate&&(this._selectedDate=this._focusedDate);this._ignoreFocusedDateChange=!1;var c=window.unwrap?window.unwrap(this.inputElement):this.inputElement;(this.shadowRoot&&this.shadowRoot.activeElement===c||document.activeElement===c)&&(c.selectionStart=c.selectionEnd),this.validate()},detached:function(){this._onOverlayClosed()},_onScroll:function(a){a.target!==window&&this.$.overlay.contains(a.target)||this._updateAlignmentAndPosition()},_preventCancelOnComponentAccess:function(a){var b=Polymer.dom(a.detail);/tap|mousedown|touchstart/.test(a.detail.type)&&-1<b.path.indexOf(this)&&a.preventDefault()},_focus:function(){this._noInput?this.$.overlay.focus():this.inputElement.focus()},_focusAndSelect:function(){this._noInput||(this._focus(),this.inputElement.setSelectionRange(0,this._inputValue.length))},_preventDefault:function(a){a.preventDefault()},_eventKey:function(a){for(var f,b=['down','up','enter','esc','tab'],c=0;c<b.length;c++)if(f=b[c],Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(a,f))return f},_isValidDate:function(a){return a&&!isNaN(a.getTime())},_onKeydown:function(a){if(this._noInput){-1===[9].indexOf(a.keyCode)&&a.preventDefault()}switch(this._eventKey(a)){case'down':case'up':a.preventDefault(),this.opened?(this.$.overlay.focus(),this.$.overlay._onKeydown(a)):(this._focusOverlayOnOpen=!0,this.open());break;case'enter':this.$.overlay.focusedDate&&(this._selectedDate=this.$.overlay.focusedDate),this.close();break;case'esc':this._focusedDate=this._selectedDate,this._close();break;case'tab':this.opened&&(a.preventDefault(),this.inputElement.setSelectionRange(0,0),a.shiftKey?this.$.overlay.focusCancel():(this.$.overlay.focus(),this.$.overlay.revealDate(this._focusedDate)));}},_validateInput:function(a,b,c){a&&(b||c)&&(this.invalid=!vaadin.elements.datepicker.DatePickerHelper._dateAllowed(a,b,c))},_userInputValueChanged:function(){var a=this.i18n.parseDate&&this.i18n.parseDate(this._inputValue);this._isValidDate(a)&&(this._ignoreFocusedDateChange=!0,this._focusedDate=a,this._ignoreFocusedDateChange=!1),this.opened||(this.open(),this.$.dropdown.async(this.$.dropdown.refit,500))},_announceFocusedDate:function(a,b,c){b&&!c&&this.$.overlay.announceFocusedDate()}},vaadin.elements.datepicker.DatePickerBehavior=[Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior,Polymer.IronA11yKeysBehavior,Polymer.IronResizableBehavior,vaadin.elements.datepicker.DatePickerBehaviorImpl];</script></head><body></body></html>