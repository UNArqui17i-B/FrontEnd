<html><head><link rel="import" href="../bower_components/polymer/polymer.html"><link rel="import" href="../bower_components/paper-input/paper-input.html"><link rel="import" href="../bower_components/paper-card/paper-card.html"><link rel="import" href="../bower_components/paper-button/paper-button.html"><link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html"><link rel="import" href="../bower_components/iron-icon/iron-icon.html"><link rel="import" href="../bower_components/iron-icons/iron-icons.html"><link rel="import" href="../bower_components/iron-icons/social-icons.html"><link rel="import" href="../bower_components/iron-icons/communication-icons.html"><link rel="import" href="../bower_components/paper-styles/typography.html"><link rel="import" href="../bower_components/iron-form/iron-form.html"><link rel="import" href="shared-styles.html"></head><body><dom-module id="view-confirm"><template><style include="shared-styles iron-flex">:host{display:block;padding:10px;--paper-input-container-focus-color:var(--app-primary-color);--paper-input-container-invalid-color:red;}</style><iron-ajax id="confirm" url="[[ backendUrl ]]/users/email/[[ confirmID ]]" method="PUT" content-type="application/x-www-form-urlencoded" handle-as="json" on-response="confirmResponse" on-error="confirmError"></iron-ajax></template><script>Polymer({is:'view-confirm',ready:function(){this.backendURL=this.backendUrl,this.confirmID=this.queryParams.id,this.$.confirm.generateRequest()},confirmResponse:function(a){var b=a.detail.response;if(b.hasOwnProperty('ok'))this.loginDialog();else if(b.hasOwnProperty('status')){var c={errorReason:b.status};this.confirmError(c)}else this.confirmError()},loginDialog:function(){this.fire('iron-signal',{name:'login-dialog',data:null}),this.set('route.path','/index')},confirmError:function(a){var b=a.errorReason||'El correo no puede ser confirmado';this.set('route.path','/index'),this.fire('iron-signal',{name:'message-dialog',data:{error:b}})}});</script></dom-module></body></html>